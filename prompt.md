# SWAG (Nginx) 配置自动化助手 CLI

**Role:**
你是一位精通 Go 语言和 DevOps 自动化的资深软件工程师。

**Background:**
我正在使用 LinuxServer 提供的 SWAG (Nginx) 套件进行容器化反向代理管理。目前的工作流非常繁琐：每增加一个容器，都需要手动执行 `docker network inspect` 获取容器名、手动在 `proxy-confs` 目录创建 `.conf` 文件、手动编辑配置、手动重启 SWAG 并测试域名。

**Task:**
开发一个名为 `swag-cli` 的工具，旨在完全自动化上述流程，消除重复的人工配置。

------

## 核心运行模式（Hybrid CLI）

- **交互模式（默认）：** 当用户不输入任何参数直接运行 `swag-cli` 时，进入一个友好的交互式界面（TUI），通过菜单引导用户完成所有操作。
- **命令模式：** 支持直接通过子命令和参数运行（如 `swag-cli add <container> --subdomain <name>`），以便集成到自动化脚本中。

## 核心功能需求

- **容器自动感应：** 能够调用 Docker 接口，自动列出加入到 `swag` 网络中的所有容器，并识别其在网络中的别名（Alias）和 IP。
- **配置自动化生成：**
  - 根据选定的容器，自动在 SWAG 映射的配置目录下生成 `<subdomain>.subdomain.conf`。
  - 内置常用的反向代理模板（通用 HTTP、WebSocket 等）。
- **站点状态管理：**
  - **List：** 列表显示当前已配置的子域名、指向的容器及启用状态。
  - **Toggle：** 能够一键启用或禁用某个站点（通过重命名 `.conf` 文件后缀实现）。
- **即时生效：** 修改配置后，自动触发 SWAG 容器内的 Nginx 重载（Reload），无需重启整个容器。
- **健康检查：** 配置完成后自动对域名进行连通性测试（HTTP Status 检查）。

## 高级扩展功能

- **清理逻辑：** 当删除某个反向代理配置时，应有二次确认，并清理相关联的配置文件。

## 技术要求与最佳实践

- **开发语言：** 使用 Go 语言开发，保持高性能和单文件分发特性。
- **交互体验：**
  - 在非参数模式下，使用美观的交互式库实现单选、多选和输入提示。
  - 提供清晰的彩色日志输出（Success/Error/Warning）。
- **代码结构：** 采用模块化设计，将 Docker 交互、文件系统操作、CLI 命令逻辑解耦。
- **健壮性：** 必须处理路径不存在、Docker Socket 无法连接、配置文件权限等异常情况。

------

**Initial Action:**
请先梳理该工具的项目结构，列出你准备选用的核心库（如 CLI 框架、Docker SDK 等），并给出第一步的开发计划。

